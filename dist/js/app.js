!function(){"use strict";function e(e){return{init:function(o,n,s,r,t){var i,a;i=function(o,s){s.keyCode===e&&n().call(this,o,s)},a=function(){return{keyup:i}},ko.bindingHandlers.event.init(o,a,s,r,t)}}}Handlebars.registerHelper("eq",function(e,o,n){return e===o?n.fn(this):n.inverse(this)});ko.bindingHandlers.enterKey=e(13),ko.bindingHandlers.escapeKey=e(27),ko.bindingHandlers.selectAndFocus={init:function(e,o,n,s){ko.bindingHandlers.hasFocus.init(e,o,n,s),ko.utils.registerEventHandler(e,"focus",function(){e.focus()})},update:function(e,o){ko.utils.unwrapObservable(o()),setTimeout(function(){ko.bindingHandlers.hasFocus.update(e,o)},0)}};var o=new function(e){function o(e){s(),t.noodleHouses(e),t.noodleHouseMap.setMarkers(t.filteredNoodleHouses())}function n(e,o){s(),r(e,o)}function s(){t.nearTarget(""),t.loading(!1),t.noodleHouses.removeAll(),t.noodleHouseMap.removeMarkers()}function r(e,o){showDialog({title:e,text:o,negative:{title:"Close"}})}var t=this;t.noodleHouseMap=noodleHouseMapFactory(),t.noodleHouses=ko.observableArray(),t.filterText=ko.observable(),t.loading=ko.observable(!1),t.showError=ko.observable(!1),t.nearTarget=ko.observable(),t.filteredNoodleHouses=ko.computed(function(){return t.filterText()?(t.noodleHouseMap.hideMarkers(),t.noodleHouses().filter(function(e){if(e.name&&e.name.toUpperCase().indexOf(t.filterText().toUpperCase())>-1)return t.noodleHouseMap.showFilteredMarkers(e),e})):(t.noodleHouseMap.showAllMarkers(),t.noodleHouses())}.bind(t));var i=noodleHouseMapFactory();t.loading(!0),i.loadDefaultNoodleHouses(function(e){t.loading(!1),t.noodleHouses(e),i.setMarkers(t.filteredNoodleHouses())},function(e,o){console.log(errorThrown),t.loading(!1),r(e,o)}),t.showNoodleHouse=function(e){t.noodleHouseMap.showSelectedNoodleHouse(e)}.bind(t),t.searchNear=function(){t.nearTarget()&&""!==t.nearTarget()?(t.loading(!0),t.noodleHouseMap.changeNear(t.nearTarget(),o,n)):r("No text input","Please input text you would like to search for.")}.bind(t)};ko.applyBindings(o)}();