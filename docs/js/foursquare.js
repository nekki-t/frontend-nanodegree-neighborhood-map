function foursquareFactory(t,e){return foursquare||new FourSquare(t,e)}var foursquare=null,FourSquare=function(t,e){this.clientId=FOURSQUARE_CLIENT_ID,this.clientSecret=FOURSQUARE_CLIENT_SECRET,this.categoryId=FOURSQUARE_CATEGORY_ID,this.limit=FOURSQUARE_SEARCH_LIMIT,this.searchTimeout=FOURSQUARE_SEARCH_TIMEOUT,this.lat=t,this.lng=e,this.apiVersion=FOURSQUARE_API_V};FourSquare.prototype.updateLocation=function(t,e){this.lat=t,this.lng=e},FourSquare.prototype.defaultSearch=function(t,e){this.search(this.near,t,e)},FourSquare.prototype.search=function(t,e){var i={client_id:this.clientId,client_secret:this.clientSecret,ll:this.lat+","+this.lng,categoryId:this.categoryId,limit:this.limit,venuePhotos:1,timeout:this.searchTimeout,v:this.apiVersion};$.ajax({url:FOURSQUARE_API_URL,type:"GET",dataType:"json",data:i,timeout:this.timeout}).done(function(e){var i=[],r=e.response.groups[0].items;r&&r.forEach(function(t){var e=new Venue(t.venue);i.push(e)}),t(i)}).fail(function(t,i,r){console.log(r),e("API Error","Our external API service is temporary unavailable.")})};